// Source code is decompiled from a .class file using FernFlower decompiler (from Intellij IDEA).
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.ArrayList;
import java.util.Random;
import javax.swing.JPanel;
import javax.swing.Timer;

public class SnakeGame extends JPanel implements ActionListener, KeyListener {
   int boardWidth;
   int boardHeight;
   int tileSize = 25;
   SnakeGame$Tile snakeHead;
   ArrayList<SnakeGame$Tile> snakeBody;
   SnakeGame$Tile food;
   Random random;
   int velocityX;
   int velocityY;
   Timer gameLoop;
   boolean gameOver = false;

   SnakeGame(int var1, int var2) {
      this.boardWidth = var1;
      this.boardHeight = var2;
      this.setPreferredSize(new Dimension(this.boardWidth, this.boardHeight));
      this.setBackground(Color.black);
      this.addKeyListener(this);
      this.setFocusable(true);
      this.snakeHead = new SnakeGame$Tile(this, 5, 5);
      this.snakeBody = new ArrayList();
      this.food = new SnakeGame$Tile(this, 10, 10);
      this.random = new Random();
      this.placeFood();
      this.velocityX = 1;
      this.velocityY = 0;
      this.gameLoop = new Timer(100, this);
      this.gameLoop.start();
   }

   public void paintComponent(Graphics var1) {
      super.paintComponent(var1);
      this.draw(var1);
   }

   public void draw(Graphics var1) {
      int var2;
      for(var2 = 0; var2 < this.boardWidth / this.tileSize; ++var2) {
         var1.drawLine(var2 * this.tileSize, 0, var2 * this.tileSize, this.boardHeight);
         var1.drawLine(0, var2 * this.tileSize, this.boardWidth, var2 * this.tileSize);
      }

      var1.setColor(Color.red);
      var1.fill3DRect(this.food.x * this.tileSize, this.food.y * this.tileSize, this.tileSize, this.tileSize, true);
      var1.setColor(Color.green);
      var1.fill3DRect(this.snakeHead.x * this.tileSize, this.snakeHead.y * this.tileSize, this.tileSize, this.tileSize, true);

      for(var2 = 0; var2 < this.snakeBody.size(); ++var2) {
         SnakeGame$Tile var3 = (SnakeGame$Tile)this.snakeBody.get(var2);
         var1.fill3DRect(var3.x * this.tileSize, var3.y * this.tileSize, this.tileSize, this.tileSize, true);
      }

      var1.setFont(new Font("Arial", 0, 16));
      if (this.gameOver) {
         var1.setColor(Color.red);
         var1.drawString("Game Over: " + String.valueOf(this.snakeBody.size()), this.tileSize - 16, this.tileSize);
      } else {
         var1.drawString("Score: " + String.valueOf(this.snakeBody.size()), this.tileSize - 16, this.tileSize);
      }

   }

   public void placeFood() {
      this.food.x = this.random.nextInt(this.boardWidth / this.tileSize);
      this.food.y = this.random.nextInt(this.boardHeight / this.tileSize);
   }

   public void move() {
      if (this.collision(this.snakeHead, this.food)) {
         this.snakeBody.add(new SnakeGame$Tile(this, this.food.x, this.food.y));
         this.placeFood();
      }

      int var1;
      SnakeGame$Tile var2;
      for(var1 = this.snakeBody.size() - 1; var1 >= 0; --var1) {
         var2 = (SnakeGame$Tile)this.snakeBody.get(var1);
         if (var1 == 0) {
            var2.x = this.snakeHead.x;
            var2.y = this.snakeHead.y;
         } else {
            SnakeGame$Tile var3 = (SnakeGame$Tile)this.snakeBody.get(var1 - 1);
            var2.x = var3.x;
            var2.y = var3.y;
         }
      }

      SnakeGame$Tile var10000 = this.snakeHead;
      var10000.x += this.velocityX;
      var10000 = this.snakeHead;
      var10000.y += this.velocityY;

      for(var1 = 0; var1 < this.snakeBody.size(); ++var1) {
         var2 = (SnakeGame$Tile)this.snakeBody.get(var1);
         if (this.collision(this.snakeHead, var2)) {
            this.gameOver = true;
         }
      }

      if (this.snakeHead.x * this.tileSize < 0 || this.snakeHead.x * this.tileSize > this.boardWidth || this.snakeHead.y * this.tileSize < 0 || this.snakeHead.y * this.tileSize > this.boardHeight) {
         this.gameOver = true;
      }

   }

   public boolean collision(SnakeGame$Tile var1, SnakeGame$Tile var2) {
      return var1.x == var2.x && var1.y == var2.y;
   }

   public void actionPerformed(ActionEvent var1) {
      this.move();
      this.repaint();
      if (this.gameOver) {
         this.gameLoop.stop();
      }

   }

   public void keyPressed(KeyEvent var1) {
      if (var1.getKeyCode() == 38 && this.velocityY != 1) {
         this.velocityX = 0;
         this.velocityY = -1;
      } else if (var1.getKeyCode() == 40 && this.velocityY != -1) {
         this.velocityX = 0;
         this.velocityY = 1;
      } else if (var1.getKeyCode() == 37 && this.velocityX != 1) {
         this.velocityX = -1;
         this.velocityY = 0;
      } else if (var1.getKeyCode() == 39 && this.velocityX != -1) {
         this.velocityX = 1;
         this.velocityY = 0;
      }

   }

   public void keyTyped(KeyEvent var1) {
   }

   public void keyReleased(KeyEvent var1) {
   }
}
